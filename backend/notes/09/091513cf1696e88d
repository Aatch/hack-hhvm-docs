106020|exception.getprevious|50|1317647471|Anonymous|TWF5IGJlIEkgYW0gbGF0ZSAoNS4yIGlzIG5vdCBzdXBwb3J0ZWQpLiBCdXQgaWYgeW91IHdhbnQgdXNlIHRoZSBmdW5jdGlvbmFsaXR5IG9mICJwcmV2aW91cyBFeGNlcHRpb24iIGluIFBIUCA8IDUuMyBvciB3cml0ZSBjb21wYXRpYmxlIGNvZGUsIHlvdSBjYW4gdXNlIG5leHQgd2F5IGFzIGJlbG93LgoKPD9waHAKYWJzdHJhY3QgY2xhc3MgQXBwX0V4Y2VwdGlvbl9QcmV2aW91c05hdGl2ZUFic3RyYWN0IGV4dGVuZHMgRXhjZXB0aW9uIHsKICAgIHB1YmxpYyBzdGF0aWMgJHByaW50UHJldmlvdXMgPSB0cnVlOwoKICAgIHB1YmxpYyBmdW5jdGlvbiBfX3RvU3RyaW5nKCkgewogICAgICAgICRyZXN1bHQgICA9IGFycmF5KCk7CiAgICAgICAgJHJlc3VsdFtdID0gc3ByaW50ZigiRXhjZXB0aW9uICclcycgd2l0aCBtZXNzYWdlICcoJXMpICVzJyBpbiAlczolZCIsIGdldF9jbGFzcygkdGhpcyksICR0aGlzLT5jb2RlLCAkdGhpcy0+bWVzc2FnZSwgJHRoaXMtPmZpbGUsICR0aGlzLT5saW5lKTsKICAgICAgICAkcmVzdWx0W10gPSAnLS0tW1N0YWNrIHRyYWNlXTonOwogICAgICAgICRyZXN1bHRbXSA9ICR0aGlzLT5nZXRUcmFjZUFzU3RyaW5nKCk7CgogICAgICAgIGlmIChzZWxmOjokcHJpbnRQcmV2aW91cykgewogICAgICAgICAgICAkcHJldmlvdXMgPSAkdGhpcy0+Z2V0UHJldmlvdXMoKTsKICAgICAgICAgICAgaWYgKCRwcmV2aW91cykgewogICAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgICAgICRyZXN1bHRbXSA9ICctLS1bUHJldmlvdXMgZXhjZXB0aW9uXTonOwogICAgICAgICAgICAgICAgICAgICRyZXN1bHRbXSA9IHNwcmludGYoIkV4Y2VwdGlvbiAnJXMnIHdpdGggbWVzc2FnZSAnKCVzKSAlcycgaW4gJXM6JWQiLCBnZXRfY2xhc3MoJHByZXZpb3VzKSwgJHByZXZpb3VzLT5nZXRDb2RlKCksICRwcmV2aW91cy0+Z2V0TWVzc2FnZSgpLCAkcHJldmlvdXMtPmdldEZpbGUoKSwgJHByZXZpb3VzLT5nZXRMaW5lKCkpOwogICAgICAgICAgICAgICAgICAgICRyZXN1bHRbXSA9ICctLS1bU3RhY2sgdHJhY2VdOic7CiAgICAgICAgICAgICAgICAgICAgJHJlc3VsdFtdID0gJHByZXZpb3VzLT5nZXRUcmFjZUFzU3RyaW5nKCk7CiAgICAgICAgICAgICAgICB9IHdoaWxlKG1ldGhvZF9leGlzdHMoJHByZXZpb3VzLCAnZ2V0UHJldmlvdXMnKSAmJiAoJHByZXZpb3VzID0gJHByZXZpb3VzLT5nZXRQcmV2aW91cygpKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBpbXBsb2RlKCJcclxuIiwgJHJlc3VsdCk7CiAgICB9Cn0KCmFic3RyYWN0IGNsYXNzIEFwcF9FeGNlcHRpb25fUHJldmlvdXNMZWdhY3lBYnN0cmFjdCBleHRlbmRzIEFwcF9FeGNlcHRpb25fUHJldmlvdXNOYXRpdmVBYnN0cmFjdCB7CiAgICBwcm90ZWN0ZWQgJHByZXZpb3VzOwoKICAgIHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkbWVzc2FnZSwgJGNvZGUgPSAwLCBFeGNlcHRpb24gJHByZXZpb3VzID0gbnVsbCkgewogICAgICAgICR0aGlzLT5wcmV2aW91cyA9ICRwcmV2aW91czsKCiAgICAgICAgcGFyZW50OjpfX2NvbnN0cnVjdCgkbWVzc2FnZSwgJGNvZGUpOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRQcmV2aW91cygpIHsKICAgICAgICByZXR1cm4gJHRoaXMtPnByZXZpb3VzOwogICAgfQp9CgppZiAodmVyc2lvbl9jb21wYXJlKFBIUF9WRVJTSU9OLCAnNS4zLjAnLCAnPj0nKSkgewogICAgYWJzdHJhY3QgY2xhc3MgQXBwX0V4Y2VwdGlvbl9QcmV2aW91c0Fic3RyYWN0IGV4dGVuZHMgQXBwX0V4Y2VwdGlvbl9QcmV2aW91c05hdGl2ZUFic3RyYWN0IHt9Cn0KZWxzZSB7CiAgICBhYnN0cmFjdCBjbGFzcyBBcHBfRXhjZXB0aW9uX1ByZXZpb3VzQWJzdHJhY3QgZXh0ZW5kcyBBcHBfRXhjZXB0aW9uX1ByZXZpb3VzTGVnYWN5QWJzdHJhY3Qge30KfQoKY2xhc3MgQXBwX0V4Y2VwdGlvbiBleHRlbmRzIEFwcF9FeGNlcHRpb25fUHJldmlvdXNBYnN0cmFjdCB7CiAgICBwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJG1lc3NhZ2UsICRjb2RlID0gMCwgRXhjZXB0aW9uICRwcmV2aW91cyA9IG51bGwpIHsKICAgICAgICBwYXJlbnQ6Ol9fY29uc3RydWN0KCRtZXNzYWdlLCAwLCAkcHJldmlvdXMpOwogICAgfQp9CgovLyBFeGFtcGxlOgp0cnkgewogICAgLy8gLi4uCiAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdFeGNlcHRpb24gbWVzYWdlJyk7CiAgICAvLyAuLi4KfSBjYXRjaCAoRXhjZXB0aW9uICRlKSB7CiAgICB0aHJvdyBuZXcgQXBwX0V4Y2VwdGlvbignQXBwIGV4Y2VwdGlvbiBtZXNhZ2UnLCAwLCAkZSk7Cn0KPz4=|1|1
