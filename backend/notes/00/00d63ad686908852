89735|function.imap-createmailbox|67|1237549446|tiznull|T25lIHNob3VsZCB1bmRlcnN0YW5kIHRoYXQgZXZlbiB0aG91Z2ggaXQgc2F5cyAiY3JlYXRlIG1haWxib3giLCB5b3UgYXJlIHJlYWxseSBjcmVhdGluZyBhIEZPTERFUi4gTm93LCBhcyBhIGltYXAgYWRtaW4geW91IGNhbiBjcmVhdGUgbWFpbGJveGVzIGFuZCBtb3JlIHdpdGggdGhpcyBmdW5jdGlvbi4KClNvIGluIHJlYWxpdHksIHlvdSBhcmUgYWx3YXlzIGNyZWF0aW5nIGZvbGRlcnMgd2hlbiBjcmVhdGluZyAibWFpbGJveGVzIi4gTWFpbCBhZG1pbidzIGdldCB0aGlzLCBidXQgcHJvZ3JhbW1lcnMgbWF5IG5vdCB1bmRlcnN0YW5kIHRoZSBjb25jZXB0IGNvbXBsZXRlbHkuCgpJZiB5b3UgYXV0aCBhIHNpbmdsZSB1c2VyIGFjY291bnQgYW5kIHVzZSB0aGVzZSBmdW5jdGlvbnMsIHRoZXkgd2lsbCBub3QgY3JlYXRlIG1haWxib3hlcyB3aGVyZSBtYWlsIGlzIGRlbGl2ZXJlZCwgdGhleSB3aWxsIGFjdHVhbGx5IGNyZWF0ZSBhIGZvbGRlciB3aGVyZSB5b3UgY2FuIGNvcHkgbWVzc2FnZXMgdG8uCgpIZXJlIGlzIGEgdHJhbnNsYXRpb246CmltYXBfY3JlYXRlbWFpbGJveCA9IGNyZWF0ZSBhIGZvbGRlciBpbiB0aGUgYWNjb3VudCBmb3IgdGhlIGN1cnJlbnQgYXV0aGVudGljYXRlZCB1c2VyJ3MgaW1hcCBzZXNzaW9uIChpbWFwX29wZW4pCmltYXBfZGVsZXRlbWFpbGJveCA9IGRlbGV0ZSBhIGZvbGRlciAoYW5kIHRoZSBlbWFpbCBpbiBpdCkgZm9yIHRoZSBjdXJyZW50IGF1dGhlbnRpY2F0ZWQgdXNlcidzIGltYXAgc2Vzc2lvbiAoaW1hcF9vcGVuKQppbWFwX2dldG1haWxib3hlcyA9IGdldCBhbGwgeW91ciBmb2xkZXJzIGZvciB0aGUgY3VycmVudCBhdXRoZW50aWNhdGVkIHVzZXIncyBpbWFwIHNlc3Npb24gKGltYXBfb3BlbikKaW1hcF9yZW5hbWVtYWlsYm94ID0gUmVuYW1lIGEgZm9sZGVyIGZvciB0aGUgY3VycmVudCBhdXRoZW50aWNhdGVkIHVzZXIncyBpbWFwIHNlc3Npb24gKGltYXBfb3BlbikKCj09PT09PT09PT09PT09PT0KCkhlcmUgaXMgYSBxdWljayBjbGFzcyB0byBsb2dpbiB0byBhbiBhY2NvdW50LCBnZW5lcmF0ZSBhbGwgb2YgeW91ciBiYXNlIGZvbGRlcnMsIGFuZCByZXR1cm4gdGhlIGNvbm5lY3Rpb24sIHN1Y2Nlc3MgbWVzc2FnZSBhbmQgcmV0dXJucyBhbGwgdGhlIGJhc2UgZm9sZGVycyBmb3IgYW4gaW1hcCBhY2NvdW50IHVzaW5nIFBIUDU6Cgo8P3BocAoKY2xhc3MgSW1hcCB7CglwdWJsaWMgJGZvbGRlcnM7CglwdWJsaWMgJGNvbm5lY3Rpb247CgoJcHVibGljIGZ1bmN0aW9uIGxvZ2luKCR1c2VyLCAkcGFzcykgewoJCSRtYm94ID0gQGltYXBfb3Blbigie2ltYXAuZXhhbXBsZS5vcmc6MTQzfSIsICR1c2VyLCAkcGFzcyk7CgkJaWYoISRtYm94KQoJCQlyZXR1cm4gKCdZb3VyIGxvZ2luIGZhaWxlZCBmb3IgdXNlciA8c3Ryb25nPicuJHVzZXIuJzwvc3Ryb25nPi4gUGxlYXNlIHRyeSB0byBlbnRlciB5b3VyIHVzZXJuYW1lIGFuZCBwYXNzd29yZCBhZ2Fpbi48YnIgLz4nKTsKCgkJLy8gTG9naW4gd29ya2VkLCBsZXQgdXMgYmVnaW4hISEhLi4uLgoKCQkvLyBnYXRoZXIgZm9sZGVyIGxvc3QuLi4KCQkkZmxkcnNfbWFkZSA9IDA7CgkJJGZvbGRlcnMgPSBpbWFwX2xpc3RtYWlsYm94KCRtYm94LCAie2xvY2FsaG9zdDoxNDN9IiwgIioiKTsKCQkvLyBjcmVhdGUgdGhlIGRlZmF1bHQgZm9sZGVycy4uLi4KCQlpZigxID09PSBtYWlsZ3VpOjpjcmVhdGVfZGVmYXVsdF9mb2xkZXJzKCRtYm94LCRmb2xkZXJzKSkgewoJCQkkZm9sZGVycyA9IGltYXBfbGlzdG1haWxib3goJG1ib3gsICJ7bG9jYWxob3N0OjE0M30iLCAiKiIpOwoJCQkkZmxkcnNfbWFkZSA9IDE7CgkJfQoKCQlzb3J0KCRmb2xkZXJzKTsKCgkJJHRoaXMtPmZvbGRlcnMgPSAkZm9sZGVyczsKCQkkdGhpcy0+Y29ubmVjdGlvbiA9ICRtYm94OwoKCQlpZigxID09PSAkZmxkcnNfbWFkZSkKCQkJcmV0dXJuICgnVXNlciBsb2dnZWQgaW4gc3VjY2Vzc2Z1bGx5IGFzICcuJHVzZXIuJy4gVGhpcyBpcyB5b3VyIGZpcnN0IHRpbWUgbG9nZ2luZyBpbiwgd2VsY29tZSB0byBvdXIgd2VibWFpbCEhITxiciAvPicpOwoJCWVsc2UKCQkJcmV0dXJuICgnVXNlciBsb2dnZWQgaW4gc3VjY2Vzc2Z1bGx5IGFzICcuJHVzZXIuJy48YnIgLz4nKTsKCX0KCXByaXZhdGUgZnVuY3Rpb24gY3JlYXRlX2RlZmF1bHRfZm9sZGVycygkaW1hcF9zdHJlYW0sICRmb2xkZXJzKSB7CgkJJGNoYW5nZT0wOwoJCWlmKCFpbl9hcnJheSgne2ltYXAuZXhhbXBsZS5vcmd9VFJBU0gnLCRmb2xkZXJzKSkgewoJCQlAaW1hcF9jcmVhdGVtYWlsYm94KCRpbWFwX3N0cmVhbSwgaW1hcF91dGY3X2VuY29kZSgie2ltYXAuZXhhbXBsZS5vcmc6MTQzfVRSQVNIIikpOwoJCQkkY2hhbmdlPTE7CgkJfQoJCWlmKCFpbl9hcnJheSgne2ltYXAuZXhhbXBsZS5vcmd9U0VOVCcsJGZvbGRlcnMpKSB7CgkJCUBpbWFwX2NyZWF0ZW1haWxib3goJGltYXBfc3RyZWFtLCBpbWFwX3V0ZjdfZW5jb2RlKCJ7aW1hcC5leGFtcGxlLm9yZzoxNDN9U0VOVCIpKTsKCQkJJGNoYW5nZT0xOwoJCX0KCQlpZighaW5fYXJyYXkoJ3tpbWFwLmV4YW1wbGUub3JnfVNQQU0nLCRmb2xkZXJzKSkgewoJCQlAaW1hcF9jcmVhdGVtYWlsYm94KCRpbWFwX3N0cmVhbSwgaW1hcF91dGY3X2VuY29kZSgie2ltYXAuZXhhbXBsZS5vcmc6MTQzfVNQQU0iKSk7CgkJCSRjaGFuZ2U9MTsKCQl9CgkJaWYoIWluX2FycmF5KCd7aW1hcC5leGFtcGxlLm9yZ31TRU5UJywkZm9sZGVycykpIHsKCQkJQGltYXBfY3JlYXRlbWFpbGJveCgkaW1hcF9zdHJlYW0sIGltYXBfdXRmN19lbmNvZGUoIntpbWFwLmV4YW1wbGUub3JnOjE0M31TRU5UIikpOwoJCQkkY2hhbmdlPTE7CgkJfQoJCWlmKCFpbl9hcnJheSgne2ltYXAuZXhhbXBsZS5vcmd9U0VOVCcsJGZvbGRlcnMpKSB7CgkJCUBpbWFwX2NyZWF0ZW1haWxib3goJGltYXBfc3RyZWFtLCBpbWFwX3V0ZjdfZW5jb2RlKCJ7aW1hcC5leGFtcGxlLm9yZzoxNDN9RFJBRlRTIikpOwoJCQkkY2hhbmdlPTE7CgkJfQoJCWlmKCFpbl9hcnJheSgne2ltYXAuZXhhbXBsZS5vcmd9TVlfRk9MREVSUycsJGZvbGRlcnMpKSB7CgkJCUBpbWFwX2NyZWF0ZW1haWxib3goJGltYXBfc3RyZWFtLCBpbWFwX3V0ZjdfZW5jb2RlKCJ7aW1hcC5leGFtcGxlLm9yZzoxNDN9UEVSU09OQUwgRU1BSUwiKSk7CgkJCSRjaGFuZ2U9MTsKCQl9CgkJcmV0dXJuICRjaGFuZ2U7Cgl9CglwdWJsaWMgZnVuY3Rpb24gY2xvc2VfbWFpbF9jb25uZWN0aW9uKCkgewoJCUBpbWFwX2Nsb3NlKCR0aGlzLT5jb25uZWN0aW9uKTsKCX0KfQoKLy8gdXNhZ2UsIGNyZWF0ZSBhIGZvcm0sIHBvc3QgaXQuLi4uCmlmKCRfUE9TVFsnaW1hcF91c2VybmFtZSddICYmICRfUE9TVFsnaW1hcF9wYXNzd29yZCddKSB7CgkkaW1hcF9sb2dpbiA9IG5ldyBJbWFwKCk7CgkkaW1hcF9sb2dpbi0+bG9naW4oJF9QT1NUWydpbWFwX3VzZXJuYW1lJ10sJF9QT1NUWydpbWFwX3Bhc3N3b3JkJ10pOwoJCgkvLyBEbyBzb21lIG1haWwgc3R1ZmYgaGVyZSwgbGlrZSBnZXQgaGVhZGVycy4uLi4sIHVzZSBvYmogY29ubmVjdGlvbgoJJG1lc3NhZ2VfaGVhZGVycyA9IGltYXBfbWFpbGJveG1zZ2luZm8oJGltYXBfbG9naW4tPmNvbm5lY3Rpb24pOwoJCgkvLyBzaG93IHRoZSBmb2xkZXJzLi4uLgoJcHJpbnRfcigkaW1hcF9sb2dpbi0+Zm9sZGVycywgdHJ1ZSk7CgkKCXByaW50ICc8YnIgLz48aHIgc2l6ZT0iMSIgbm9zaGFkZSAvPic7CgkKCXByaW50X3IoJG1lc3NhZ2VfaGVhZGVycywgdHJ1ZSk7CgkKCgkvLyBjbG9zZSB0aGUgY29ubmVjdGlvbgoJJGltYXBfbG9naW4tPmNsb3NlX21haWxfY29ubmVjdGlvbigpOwp9Cgo/Pg==|2|1
