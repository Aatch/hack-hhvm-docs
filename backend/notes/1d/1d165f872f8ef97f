99283|stream.streamwrapper.example-1|83|1281260842|pfe dot skh at gmail dot com|RXhhbXBsZSBvZiBzdHJlYW0gdXNlZCB3aXRoIGRhdGFiYXNlcyA6CgpSZXF1aXJlbWVudCA6CkEgTXlTUUwgZGF0YWJhc2Ugd2l0aCBhIHRhYmxlIG5hbWVkIGRhdGEgc3RydWN0dXJlZCBhcyBmb2xsb3cgOgpDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBgZGF0YWAgKAogIGBpZGAgaW50KDEwKSB1bnNpZ25lZCBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVCwKICBgZGF0YWAgdmFyY2hhcigyNTUpIE5PVCBOVUxMLAogIGB3aGVuX2luc2VydGVkYCBkYXRldGltZSBOT1QgTlVMTCwKICBQUklNQVJZIEtFWSAoYGlkYCkKKSBFTkdJTkU9TXlJU0FNICBERUZBVUxUIENIQVJTRVQ9bGF0aW4xIEFVVE9fSU5DUkVNRU5UPTEgOwoKTm93IHdpdGggdGhlIHN0cmVhbSBpbXBsZW1lbnRhdGlvbiA6Cgo8P3BocAoKY2xhc3MgREJTdHJlYW0gewogICAgcHJpdmF0ZSAkX3BkbzsKICAgIHByaXZhdGUgJF9wczsKICAgIHByaXZhdGUgJF9yb3dJZCA9IDA7CgogICAgZnVuY3Rpb24gc3RyZWFtX29wZW4oJHBhdGgsICRtb2RlLCAkb3B0aW9ucywgJiRvcGF0aCkKICAgIHsKICAgICAgICAkdXJsID0gcGFyc2VfdXJsKCRwYXRoKTsKICAgICAgICAkdXJsWydwYXRoJ10gPSBzdWJzdHIoJHVybFsncGF0aCddLCAxKTsKICAgICAgICB0cnl7CiAgICAgICAgICAgICR0aGlzLT5fcGRvID0gbmV3IFBETygibXlzcWw6aG9zdD17JHVybFsnaG9zdCddfTtkYm5hbWU9eyR1cmxbJ3BhdGgnXX0iLCAkdXJsWyd1c2VyJ10sIGlzc2V0KCR1cmxbJ3Bhc3MnXSk/ICR1cmxbJ3Bhc3MnXSA6ICcnLCBhcnJheSgpKTsKICAgICAgICB9IGNhdGNoKFBET0V4Y2VwdGlvbiAkZSl7IHJldHVybiBmYWxzZTsgfQogICAgICAgIHN3aXRjaCAoJG1vZGUpewogICAgICAgICAgICBjYXNlICd3JyA6IAogICAgICAgICAgICAgICAgJHRoaXMtPl9wcyA9ICR0aGlzLT5fcGRvLT5wcmVwYXJlKCdJTlNFUlQgSU5UTyBkYXRhIFZBTFVFUyhudWxsLCA/LCBOT1coKSknKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdyJyA6IAogICAgICAgICAgICAgICAgJHRoaXMtPl9wcyA9ICR0aGlzLT5fcGRvLT5wcmVwYXJlKCdTRUxFQ1QgaWQsIGRhdGEgRlJPTSBkYXRhIFdIRVJFIGlkID4gPyBMSU1JVCAxJyk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdCAgOiByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHN0cmVhbV9yZWFkKCkKICAgIHsKICAgICAgICAgJHRoaXMtPl9wcy0+ZXhlY3V0ZShhcnJheSgkdGhpcy0+X3Jvd0lkKSk7CiAgICAgICAgIGlmKCR0aGlzLT5fcHMtPnJvd0NvdW50KCkgPT0gMCkgcmV0dXJuIGZhbHNlOwogICAgICAgICAkdGhpcy0+X3BzLT5iaW5kY29sdW1uKDEsICR0aGlzLT5fcm93SWQpOwogICAgICAgICAkdGhpcy0+X3BzLT5iaW5kY29sdW1uKDIsICRyZXQpOwogICAgICAgICAkdGhpcy0+X3BzLT5mZXRjaCgpOwogICAgICAgICByZXR1cm4gJHJldDsKICAgIH0KCiAgICBmdW5jdGlvbiBzdHJlYW1fd3JpdGUoJGRhdGEpCiAgICB7CiAgICAgICAgJHRoaXMtPl9wcy0+ZXhlY3V0ZShhcnJheSgkZGF0YSkpOwogICAgICAgIHJldHVybiBzdHJsZW4oJGRhdGEpOwogICAgfQoKICAgIGZ1bmN0aW9uIHN0cmVhbV90ZWxsKCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPl9yb3dJZDsKICAgIH0KCiAgICBmdW5jdGlvbiBzdHJlYW1fZW9mKCkKICAgIHsKICAgICAgICAkdGhpcy0+X3BzLT5leGVjdXRlKGFycmF5KCR0aGlzLT5fcm93SWQpKTsKICAgICAgICByZXR1cm4gKGJvb2wpICR0aGlzLT5fcHMtPnJvd0NvdW50KCk7CiAgICB9CgogICAgZnVuY3Rpb24gc3RyZWFtX3NlZWsoJG9mZnNldCwgJHN0ZXApCiAgICB7CiAgICAgICAgLy9ObyBuZWVkIHRvIGJlIGltcGxlbWVudGVkCiAgICB9Cn0KCnN0cmVhbV9yZWdpc3Rlcl93cmFwcGVyKCdkYicsICdEQlN0cmVhbScpOwoKJGZyID0gZm9wZW4oJ2RiOi8vdGVzdHVzZXJAbG9jYWxob3N0L3Rlc3RkYicsICdyJyk7CiRmdyA9IGZvcGVuKCdkYjovL3Rlc3R1c2VyOnRlc3RwYXNzd29yZEBsb2NhbGhvc3QvdGVzdGRiJywgJ3cnKTsKLy9UaGUgdHdvIGZvcm1zIGFib3ZlIGFyZSBhY2NlcHRlZCA6IGZvciB0aGUgZm9ybWVyLCB0aGUgZGVmYXVsdCBwYXNzd29yZCAiIiB3aWxsIGJlIHVzZWQKCiRhbGcgPSBoYXNoX2FsZ29zKCk7CiRhbCA9ICRhbGdbYXJyYXlfcmFuZCgkYWxnKV07CiRkYXRhID0gaGFzaCgkYWwsIHJhbmQocmFuZCgwLCA5KSwgcmFuZCgxMCwgOTk5KSkpOyAvLyBTb21lIHJhbmRvbSBkYXRhIHRvIGJlIHdyaXR0ZW4KZndyaXRlKCRmdywgJGRhdGEpOyAvLyBXcml0aW5nIHRoZSBkYXRhIHRvIHRoZSB3cmFwcGVyCndoaWxlKCRhID0gZnJlYWQoJGZyLCAyNTYpKXsgLy9BIGxvb3AgZm9yIHJlYWRpbmcgZnJvbSB0aGUgd3JhcHBlcgogICAgZWNobyAkYSAuICc8YnIgLz4nOwp9Cj8+CgpIb3BlIGl0IGhlbHBzLCBjaGVlcnMgOyk=|5|1
