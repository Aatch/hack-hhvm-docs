112610|example.xml-structure|13|1372933934|Sample at hotmail dot com|PD9waHANCg0KcHVibGljIHN0YXRpYyBmdW5jdGlvbiB4bWwyYXJyYXkoJGVsZW1lbnQsICRhcnIgPSBhcnJheSgpKQ0KCXsNCgkJaWYoaXNfc3RyaW5nKCRlbGVtZW50KSkNCgkJew0KCQkJJGVsZW1lbnQgPSAoc3RybGVuKCRlbGVtZW50KSA+IDUgJiYgc3Vic3RyKCRlbGVtZW50LCAtNCkgPT09ICcueG1sJykgDQoJCQkJCQkJPyBzaW1wbGV4bWxfbG9hZF9maWxlKERBVEFQQVRILiRlbGVtZW50KQ0KCQkJCQkJCTogc2ltcGxleG1sX2xvYWRfc3RyaW5nKCRlbGVtZW50KTsNCgkJfQ0KICAgICAJJGl0ZXIgPSAwOw0KICAgICAgICBmb3JlYWNoKCRlbGVtZW50LT5jaGlsZHJlbigpIGFzICRiKQ0KCQl7DQoJCQkkYSA9ICRiLT5nZXROYW1lKCk7DQoJCQlpZighJGItPmNoaWxkcmVuKCkpew0KCQkJCQkkYXJyWyRhXSA9IHRyaW0oJGJbMF0pOw0KCQkJfQ0KCQkJZWxzZXsNCgkJCQkJJGFyclskYV1bJGl0ZXJdID0gYXJyYXkoKTsNCgkJCQkJJGFyclskYV1bJGl0ZXJdID0gc2VsZjo6eG1sMmFycmF5KCRiLCRhcnJbJGFdWyRpdGVyXSk7DQoJCQl9DQogICAgICAgCSAJJGl0ZXIrKzsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gJGFycjsNCgl9DQp9DQoNCj8+|1|7
94372|example.xml-structure|63|1256936823|roan at horning dot us|VGhlIGZvbGxvd2luZyBleGFtcGxlIHdpbGwgZWNobyBiYWNrIGFuIHhtbCBmaWxlIHVzaW5nIHRoZSBiYXNpYyBldmVudCBiYXNlZCBwYXJzZXIuICBDdXJyZW50bHksIChhdCBsZWFzdCBpbiB0aGUgdmVyc2lvbiBvZiBQSFA1IEknbSB1c2luZykgaXQgd2lsbCBza2lwIFRoZSBYTUwgZGVjbGFyYXRpb24gYW5kIHRoZSBEb2N0eXBlIGRlY2xhcmF0aW9uLS10aGV5IGRvbid0IHNlZW0gdG8gYmUgY2FwdHVyZWQgYnkgdGhlIGRlZmF1bHQgaGFuZGxlci4NCg0KPD9waHANCmVjaG8gIjxwcmU+IjsNCg0KJGZpbGUgPSAidGVzdC54bWwiOw0KZWNobyAkZmlsZS4iXG4iOw0KZ2xvYmFsICRpblRhZzsNCg0KJGluVGFnID0gIiI7DQokeG1sX3BhcnNlciA9IHhtbF9wYXJzZXJfY3JlYXRlKCk7DQp4bWxfcGFyc2VyX3NldF9vcHRpb24oJHhtbF9wYXJzZXIsIFhNTF9PUFRJT05fQ0FTRV9GT0xESU5HLCAwKTsNCnhtbF9wYXJzZXJfc2V0X29wdGlvbigkeG1sX3BhcnNlciwgWE1MX09QVElPTl9TS0lQX1dISVRFLCAxKTsNCnhtbF9zZXRfcHJvY2Vzc2luZ19pbnN0cnVjdGlvbl9oYW5kbGVyKCR4bWxfcGFyc2VyLCAicGlfaGFuZGxlciIpOw0KeG1sX3NldF9kZWZhdWx0X2hhbmRsZXIoJHhtbF9wYXJzZXIsICJwYXJzZURFRkFVTFQiKTsNCnhtbF9zZXRfZWxlbWVudF9oYW5kbGVyKCR4bWxfcGFyc2VyLCAic3RhcnRFbGVtZW50IiwgImVuZEVsZW1lbnQiKTsNCnhtbF9zZXRfY2hhcmFjdGVyX2RhdGFfaGFuZGxlcigkeG1sX3BhcnNlciwgImNvbnRlbnRzIik7DQoNCmlmICghKCRmcCA9IGZvcGVuKCRmaWxlLCAiciIpKSkgew0KICAgIGlmICgheG1sX3BhcnNlKCR4bWxfcGFyc2VyLCAkZGF0YSwgZmVvZigkZnApKSkgew0KICAgICAgIGRpZSggc3ByaW50ZigiWE1MIGVycm9yOiAlcyBhdCBsaW5lICVkIiwgDQoJCQkJCQkJeG1sX2Vycm9yX3N0cmluZyh4bWxfZ2V0X2Vycm9yX2NvZGUoJHhtbF9wYXJzZXIpKSwNCgkJCQkJCQl4bWxfZ2V0X2N1cnJlbnRfbGluZV9udW1iZXIoJHhtbF9wYXJzZXIpKSk7DQogICAgfQ0KfQ0Kd2hpbGUgKCRkYXRhID0gZnJlYWQoJGZwLCA0MDk2KSkgew0KICAgIGlmICgheG1sX3BhcnNlKCR4bWxfcGFyc2VyLCAkZGF0YSwgZmVvZigkZnApKSkgew0KICAgICAgIGRpZSggc3ByaW50ZigiWE1MIGVycm9yOiAlcyBhdCBsaW5lICVkIiwgDQoJCQkJCQkJeG1sX2Vycm9yX3N0cmluZyh4bWxfZ2V0X2Vycm9yX2NvZGUoJHhtbF9wYXJzZXIpKSwNCgkJCQkJCQl4bWxfZ2V0X2N1cnJlbnRfbGluZV9udW1iZXIoJHhtbF9wYXJzZXIpKSk7DQogICAgfQ0KfQ0KeG1sX3BhcnNlcl9mcmVlKCR4bWxfcGFyc2VyKTsNCg0KZnVuY3Rpb24gc3RhcnRFbGVtZW50KCRwYXJzZXIsICRuYW1lLCAkYXR0cnMpIHsNCg0KCWdsb2JhbCAkaW5UYWc7DQoJZ2xvYmFsICRkZXB0aDsNCgkJDQoJJHBhZFRhZyA9IHN0cl9yZXBlYXQoc3RyX3BhZCgiICIsIDMpLCAkZGVwdGgpOw0KDQoJaWYgKCEoJGluVGFnID09ICIiKSkgew0KCQllY2hvICImZ3Q7IjsNCgl9DQoJZWNobyAiXG4kcGFkVGFnJmx0OyRuYW1lIjsNCglmb3JlYWNoICgkYXR0cnMgYXMgJGtleSA9PiAkdmFsdWUpIHsNCgkJZWNobyAiXG4kcGFkVGFnIi5zdHJfcGFkKCIgIiwgMyk7DQoJCWVjaG8gIiAka2V5PVwiJHZhbHVlXCIiOw0KCX0NCgkkaW5UYWcgPSAkbmFtZTsNCgkkZGVwdGgrKzsNCn0NCg0KZnVuY3Rpb24gZW5kRWxlbWVudCgkcGFyc2VyLCAkbmFtZSkgew0KDQoJZ2xvYmFsICRkZXB0aDsNCiAgIGdsb2JhbCAkaW5UYWc7DQoJZ2xvYmFsICRjbG9zZVRhZzsNCgkJDQoJJGRlcHRoLS07DQoNCiAgIGlmICgkY2xvc2VUYWcgPT0gVFJVRSkgew0KICAgCWVjaG8gIiZsdC8kbmFtZSZndDsiOw0KICAgCSRpblRhZyA9ICIiOw0KICAgfSBlbHNlaWYgKCRpblRhZyA9PSAkbmFtZSkgew0KICAgCWVjaG8gIiAvJmd0OyI7DQogICAJJGluVGFnID0gIiI7DQogICB9IGVsc2Ugew0KIAkJJHBhZFRhZyA9IHN0cl9yZXBlYXQoc3RyX3BhZCgiICIsIDMpLCAkZGVwdGgpOw0KICAgCWVjaG8gIlxuJHBhZFRhZyZsdC8kbmFtZSZndDsiOw0KCX0gIA0KfQ0KICANCmZ1bmN0aW9uIGNvbnRlbnRzKCRwYXJzZXIsICRkYXRhKSB7DQoNCglnbG9iYWwgJGNsb3NlVGFnOw0KCQ0KICAgICRkYXRhID0gcHJlZ19yZXBsYWNlKCIvXlxzKy8iLCAiIiwgJGRhdGEpOw0KICAgICRkYXRhID0gcHJlZ19yZXBsYWNlKCIvXHMrJC8iLCAiIiwgJGRhdGEpOw0KDQogICAgaWYgKCEoJGRhdGEgPT0gIiIpKSAgew0KCQllY2hvICImZ3Q7JGRhdGEiOw0KCQkkY2xvc2VUYWcgPSBUUlVFOw0KICAgIH0gZWxzZSB7DQoJCSRjbG9zZVRhZyA9IEZBTFNFOw0KCSB9DQp9DQoNCmZ1bmN0aW9uIHBhcnNlREVGQVVMVCgkcGFyc2VyLCAkZGF0YSkgew0KCQ0KICAgICRkYXRhID0gcHJlZ19yZXBsYWNlKCIvPC8iLCAiJmx0OyIsICRkYXRhKTsNCiAgICAkZGF0YSA9IHByZWdfcmVwbGFjZSgiLz4vIiwgIiZndDsiLCAkZGF0YSk7DQogICAgZWNobyAkZGF0YTsNCn0NCg0KZnVuY3Rpb24gcGlfaGFuZGxlcigkcGFyc2VyLCAkdGFyZ2V0LCAkZGF0YSkgew0KDQoJZWNobyAiJmx0Oz8kdGFyZ2V0ICRkYXRhPyZndDtcbiI7DQp9DQplY2hvICI8L3ByZT4iOw0KPz4=|5|3
