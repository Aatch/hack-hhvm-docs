108203|imagick.getimagecolors|100|1333752899|holdoffhunger at gmail dot com|SSd2ZSBoYWQgZGlmZmljdWx0eSBnZXR0aW5nIHRoaXMgZnVuY3Rpb24gdG8gcmV0dXJuIHRoZSBudW1iZXIgb2YgdW5pcXVlIGNvbG9ycy4gIEFsc28sIEkgd2FudGVkIHRvIGJlIGFibGUgdG8gaGF2ZSBhbiBhcnJheSB3aXRoIGVhY2ggJGtleSB2YWx1ZSBiZWluZyB0aGUgUkdCIG9mIHRoZSBwaXhlbCwgYW5kIGVhY2ggJHZhbHVlIHZhbHVlIGJlaW5nIHRoZSBudW1iZXIgb2YgdGltZXMgdGhhdCBwaXhlbCBvY2N1cnMuICBCYXNpY2FsbHksIGEgZnJlcXVlbmN5IGxpc3QuICBGb3IgZXhhbXBsZSwgeW91IHdvdWxkIGhhdmUgIjEgLyAwIC8gMCIgZm9yIHJlZCBhcyBhICRrZXkgdmFsdWUsIGFuZCAiMjUiIGZvciB0aGUgbnVtYmVyIG9mIHRpbWVzIHRoYXQgcGl4ZWwgY29sb3Igd2FzIGluIHRoZSBpbWFnZS4gIFNvLCBJIHdyb3RlIHNvbWUgY29kZSB0byBkbyB0aGF0LCB1c2luZyBhIGNvbWJpbmF0aW9uIG9mIHJlYWRJbWFnZUZpbGUsIGdldEltYWdlV2lkdGgsIGdldEltYWdlSGVpZ2h0LCBnZXRJbWFnZVBpeGVsQ29sb3IsIGFuZCBhIHNpbXBsZSB4L3kgcGFyc2VyLCBsaWtlIHNvIDoKCjw/cGhwCgoJCS8vIFRlc3QgRmlsZQoJCS8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCQkJLy8gTm90ZTogVGhpcyBmaWxlIHdhcyBqdXN0IGEgcGljdHVyZSBvZiBhIDV4NSByZWQgc3F1YXJlCgkJCS8vCWluc2lkZSBvZiBhIGdpZ2FudGljIDUyMXg1MTIgYmxhY2sgc3F1YXJlLCBhbmQKCQkJLy8JdGhlbiBJIGRpZCBhIGJ1bmNoIG9mIHJhbmRvbSwgeWVsbG93IHppZ3phZ3MuCgoJJGZpbGVfdG9fZ3JhYl93aXRoX2xvY2F0aW9uID0gInRlc3QuYm1wIjsKCgkkaW1hZ2lja190eXBlID0gbmV3IEltYWdpY2soKTsKCQkJCgkJLy8gT3BlbiBGaWxlCgkJLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJCQkJCgkkZmlsZV9oYW5kbGVfZm9yX3ZpZXdpbmdfaW1hZ2VfZmlsZSA9IGZvcGVuKCRmaWxlX3RvX2dyYWJfd2l0aF9sb2NhdGlvbiwgJ2ErJyk7CgkkaW1hZ2lja190eXBlLT5yZWFkSW1hZ2VGaWxlKCRmaWxlX2hhbmRsZV9mb3Jfdmlld2luZ19pbWFnZV9maWxlKTsKCQoJCS8vIFByZXNldCBJbmZvcm1hdGlvbgoJCS8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCSRmcmVxdWVuY3lfbGlzdF9vZl92YWx1ZXMgPSBhcnJheSgpOwoJCgkJLy8gUGFyc2UgUGl4ZWxzCgkJLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJCgkkaW1hZ2VfcmVzb2x1dGlvbl93aWR0aCA9ICRpbWFnaWNrX3R5cGUtPmdldEltYWdlV2lkdGgoKTsKCSRpbWFnZV9yZXNvbHV0aW9uX2hlaWdodCA9ICRpbWFnaWNrX3R5cGUtPmdldEltYWdlSGVpZ2h0KCk7CgkJCglwcmludCgiSW1hZ2UgUmVzb2x1dGlvbjogIFdpZHRoIC0gJGltYWdlX3Jlc29sdXRpb25fd2lkdGggLyBIZWlnaHQgLSAkaW1hZ2VfcmVzb2x1dGlvbl9oZWlnaHQ8YnI+PGJyPiIpOwoJCgkJLy8gUGFyc2UgSW1hZ2UgVG9wLXRvLUJvdHRvbSAoWS1WYXJpYWJsZSkKCQkvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQoJZm9yKCR5ID0gMDsgJHkgPCAkaW1hZ2VfcmVzb2x1dGlvbl9oZWlnaHQ7ICR5KyspCgl7CgkJCS8vIFBhcnNlIEltYWdlIExlZnQtdG8tUmlnaHQgKFgtVmFyaWFibGUpCgkJCS8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCQoJCWZvcigkeCA9IDA7ICR4IDwgJGltYWdlX3Jlc29sdXRpb25fd2lkdGg7ICR4KyspCgkJewoJCQoJCQkJLy8gSW1hZ2UgUGl4ZWwgQ29sb3IKCQkJCS8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCQoJCQkkcGl4ZWxfdG9fZXhhbWluZSA9ICRpbWFnaWNrX3R5cGUtPmdldEltYWdlUGl4ZWxDb2xvcigkeCwkeSk7CgkJCQoJCQkkcGl4ZWxfdG9fZXhhbWluZV9jb2xvcl92YWx1ZV9yZWQgPSAkcGl4ZWxfdG9fZXhhbWluZS0+Z2V0Q29sb3JWYWx1ZShpbWFnaWNrOjpDT0xPUl9SRUQpOwoJCQkkcGl4ZWxfdG9fZXhhbWluZV9jb2xvcl92YWx1ZV9ncmVlbiA9ICRwaXhlbF90b19leGFtaW5lLT5nZXRDb2xvclZhbHVlKGltYWdpY2s6OkNPTE9SX0dSRUVOKTsKCQkJJHBpeGVsX3RvX2V4YW1pbmVfY29sb3JfdmFsdWVfYmx1ZSA9ICRwaXhlbF90b19leGFtaW5lLT5nZXRDb2xvclZhbHVlKGltYWdpY2s6OkNPTE9SX0JMVUUpOwoKCQkJCS8vIFNldCBLZXkgVmFsdWUKCQkJCS8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCQoJCQkka2V5X3ZhbHVlID0JJHBpeGVsX3RvX2V4YW1pbmVfY29sb3JfdmFsdWVfcmVkCS4JIiAvICIJLgoJCQkJCSRwaXhlbF90b19leGFtaW5lX2NvbG9yX3ZhbHVlX2dyZWVuCS4JIiAvICIJLgoJCQkJCSRwaXhlbF90b19leGFtaW5lX2NvbG9yX3ZhbHVlX2JsdWUJCQk7CgkKCQkJCS8vIEluY3JlbWVudCBBcnJheSBFbnRyeSBmb3IgQ29sb3IKCQkJCS8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCQkJCQoJCQlpZihpc3NldCgkZnJlcXVlbmN5X2xpc3Rfb2ZfdmFsdWVzWyRrZXlfdmFsdWVdKSA9PSBUUlVFKQoJCQl7CgkJCQkkdGVtcCA9ICRmcmVxdWVuY3lfbGlzdF9vZl92YWx1ZXNbJGtleV92YWx1ZV07CgkJCQkkdGVtcCsrOwoJCQkJJGZyZXF1ZW5jeV9saXN0X29mX3ZhbHVlc1ska2V5X3ZhbHVlXSA9ICR0ZW1wOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJGZyZXF1ZW5jeV9saXN0X29mX3ZhbHVlc1ska2V5X3ZhbHVlXSA9IDE7CgkJCX0KCQl9Cgl9CgkJCQkKCQkvLyBQcmludCBPdXQgQXJyYXkgb2YgVmFsdWVzCgkJLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkKCXByaW50KCI8cHJlPiIpOwoJcHJpbnRfcigkZnJlcXVlbmN5X2xpc3Rfb2ZfdmFsdWVzKTsKCXByaW50KCI8L3ByZT4iKTsKCi8qCgoJUmVzdWx0czoKCS0tLS0tLS0tLS0tLS0tLS0tLQoKSW1hZ2UgUmVzb2x1dGlvbjogV2lkdGggLSA1MjEgLyBIZWlnaHQgLSA1MTIKCkFycmF5CigKICAgIFsxIC8gMCAvIDBdID0+IDI1CiAgICBbMCAvIDAgLyAxXSA9PiAyNjQxMDcKICAgIFsxIC8gMSAvIDBdID0+IDI2MjAKKQoKKi8KCj8+|1|0
