112269|class.cond|50|1369487505|jan|QXMgQ29uZCAobm9yIE11dGV4KSBpcyBnb29kIGZvciBxdWV1aW5nIHRhc2tzLCBhbmQgYXJyYXlzL29iamVjdHMgc3RvcmVkIGEgInNlcmlhbGl6ZWQiIChjYW4ndCB1c2UgaXQgYXMgZXhjZXB0ZWQgZm9yIHNpZ25hbHMgb3V0c2lkZSB0aGUgcnVuKCkpIGhlcmUgaXMgYSBzaW1wbGUgdGFzayBxdWV1ZSB0cmFpdDoKPD9waHAKZGVmaW5lKCdUJywxMDAwMDAwKTsKdHJhaXQgVGFza1F1ZXVlewogICAgcHJpdmF0ZSAkcXVldWVfbGVuID0gMDsKICAgIHByaXZhdGUgJHF1ZXVlX3BvaW50ZXIgPSAwOwogICAgcHJpdmF0ZSAkcXVldWVfY3VyciA9IDA7CiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gcXVldWVJbml0KCl7JHRoaXMtPnF1ZXVlX2xlbiA9IDA7ICR0aGlzLT5xdWV1ZV9wb2ludGVyID0gMDsgJHRoaXMtPnF1ZXVlX2N1cnIgPSAwO30KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBnZXROZXh0UXVldWVkKCl7CiAgICAgICAgaWYgKCR0aGlzLT5xdWV1ZV9sZW4gPT0gMCkgcmV0dXJuIG51bGw7CiAgICAgICAgJHAgPSAkdGhpcy0+cXVldWVfY3VycjsKICAgICAgICAkeCA9IDA7CiAgICAgICAgJHJldCA9IFtdOwogICAgICAgIGRvewogICAgICAgICAgICAka2V5ID0gInF1ZXVlX2Z1bmNfeyRwfSI7CiAgICAgICAgICAgIGlmICgkdGhpcy0+JGtleSl7CiAgICAgICAgICAgICAgICAkcmV0WydmdW5jJ10gPSAkdGhpcy0+JGtleTsKICAgICAgICAgICAgICAgIHVuc2V0KCR0aGlzLT4ka2V5KTsKICAgICAgICAgICAgICAgICRrZXkgPSAicXVldWVfcGFyYW1zX3skcH0iOwogICAgICAgICAgICAgICAgJHBycyA9ICR0aGlzLT4ka2V5OwogICAgICAgICAgICAgICAgdW5zZXQoJHRoaXMtPiRrZXkpOwogICAgICAgICAgICAgICAgJHJldFsncGFyYW1zJ10gPSBbXTsKICAgICAgICAgICAgICAgIGZvciAoJGkgPSAwOyAkaSA8ICRwcnM7ICRpKyspewogICAgICAgICAgICAgICAgICAgICRrZXkgPSAicXVldWVfcGFyYW1feyRwfV97JGl9IjsKICAgICAgICAgICAgICAgICAgICAkcmV0WydwYXJhbXMnXVtdID0gICR0aGlzLT4ka2V5OwogICAgICAgICAgICAgICAgICAgIHVuc2V0KCR0aGlzLT4ka2V5KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICR0aGlzLT5xdWV1ZV9sZW4tLTsKICAgICAgICAgICAgICAgICR0aGlzLT5xdWV1ZV9jdXJyKys7CiAgICAgICAgICAgICAgICByZXR1cm4gJHJldDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlICRwKys7CiAgICAgICAgICAgIGlmICgkeCsrID4gMTAwMCl7ICAgLy8gdGhlIHF1ZXVlIGlzIGNvcnJ1cHQKICAgICAgICAgICAgICAgIGVjaG8gIlxuXHRcdCB0YXNrIHF1ZXVlIGlzIGNvcnJ1cHQgZm9yICIuZ2V0X2NhbGxlZF9jbGFzcygpLiJcbiI7CiAgICAgICAgICAgICAgICAkdGhpcy0+cXVldWVfbGVuID0gMDsKICAgICAgICAgICAgICAgICR0aGlzLT5xdWV1ZV9wb2ludGVyID0gMDsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgfXdoaWxlKGlzc2V0KCR0aGlzLT4ka2V5KSk7CiAgICAgICAgcmV0dXJuIG51bGw7CgogICAgfQogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIGFkZFRvUXVldWUoJGZ1bmMsJHBhcmFtcyA9IFtdKXsKICAgICAgICBpZiAoIWlzX2FycmF5KCRwYXJhbXMpIHx8ICFAbWV0aG9kX2V4aXN0cygkdGhpcywkZnVuYykpIHJldHVybiBmYWxzZTsKICAgICAgICAkcCA9ICR0aGlzLT5xdWV1ZV9wb2ludGVyOwogICAgICAgICRrZXkgPSAicXVldWVfZnVuY197JHB9IjsKICAgICAgICAkdGhpcy0+JGtleSA9ICRmdW5jOwogICAgICAgICRrZXkgPSAicXVldWVfcGFyYW1zX3skcH0iOwogICAgICAgICR0aGlzLT4ka2V5ID0gY291bnQoJHBhcmFtcyk7CiAgICAgICAgJGkgPSAwOwogICAgICAgIGZvcmVhY2ggKCRwYXJhbXMgYXMgJHBhKXsKICAgICAgICAgICAgJGtleSA9ICJxdWV1ZV9wYXJhbV97JHB9X3skaX0iOwogICAgICAgICAgICAkdGhpcy0+JGtleSA9ICRwYTsKICAgICAgICAgICAgJGkrKzsKICAgICAgICB9CiAgICAgICAgJHRoaXMtPnF1ZXVlX3BvaW50ZXIrKzsKICAgICAgICAkdGhpcy0+cXVldWVfbGVuKys7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0KCmNsYXNzIEEgZXh0ZW5kcyBUaHJlYWR7CiAgICB1c2UgVGFza1F1ZXVlOwogICAgcHJpdmF0ZSAkc2lnX3Rlcm07CiAgICBwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKXsKICAgICAgICAkdGhpcy0+Y29uZCA9IENvbmQ6OmNyZWF0ZSgpOwogICAgICAgICR0aGlzLT5zaWdfdGVybSA9IGZhbHNlOwogICAgICAgICR0aGlzLT5xdWV1ZUluaXQoKTsgLy8gdGhyZWFkcyBkb24ndCBsaWtlIGRlZmF1bHQgcGFyYW1ldGVycwogICAgICAgICR0aGlzLT5zdGFydCgpOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBydW4oKXsKICAgICAgICB3aGlsZSghJHRoaXMtPnNpZ190ZXJtKXsKICAgICAgICAgICAgd2hpbGUoKCRxaSA9ICR0aGlzLT5nZXROZXh0UXVldWVkKCkpKXsKICAgICAgICAgICAgICAgIGNhbGxfdXNlcl9mdW5jX2FycmF5KFskdGhpcywkcWlbJ2Z1bmMnXV0sJHFpWydwYXJhbXMnXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWNobyAibm93IGRvaW5nIE1BSU4gLS0gIjsKICAgICAgICAgICAgdXNsZWVwKDEqVCk7CiAgICAgICAgICAgIGVjaG8gImZpbmlzaGVkIE1BSU5cbiI7CiAgICAgICAgfQogICAgICAgIE11dGV4OjpkZXN0cm95KCRtKTsKICAgIH0KCiAgICBwcml2YXRlIGZ1bmN0aW9uIHJlYWxseURvQSgkYSl7CiAgICAgICAgZWNobyAiZG9pbmcgQTogeyRhfSAtLSAiOwogICAgICAgIHVzbGVlcCgwLjcqVCk7CiAgICAgICAgZWNobyAiZmluaXNoZWQgQVxuIjsKCiAgICB9CiAgICBwdWJsaWMgZnVuY3Rpb24gZG9BKCRwYXJhbTEpewogICAgICAgICR0aGlzLT5hZGRUb1F1ZXVlKCdyZWFsbHlEb0EnLFskcGFyYW0xXSk7CiAgICB9CiAgICBwcml2YXRlIGZ1bmN0aW9uIHJlYWxseURvQigkYSwkYil7CiAgICAgICAgZWNobyAiZG9pbmcgQjogeyRhfSx7JGJ9IC0tICI7CiAgICAgICAgdXNsZWVwKDAuMSpUKTsKICAgICAgICBlY2hvICJmaW5pc2hlZCBCXG4iOwoKICAgIH0KICAgIHB1YmxpYyBmdW5jdGlvbiBkb0IoJHBhcmFtMSwgJHBhcmFtMil7CiAgICAgICAgJHRoaXMtPmFkZFRvUXVldWUoJ3JlYWxseURvQicsWyRwYXJhbTEsJHBhcmFtMl0pOwogICAgfQogICAgcHVibGljIGZ1bmN0aW9uIHRlcm0oKXskdGhpcy0+c2lnX3Rlcm0gPSB0cnVlO30KfQoKJGEgPSBuZXcgQSgpOwp1c2xlZXAoMS4yKlQpOwokYS0+ZG9BKDIpOwokYS0+ZG9BKDMpOwokYS0+ZG9CKCJub3cgYiIsInNvbWV0aGluZyIpOwp1c2xlZXAoNS40KlQpOwokYS0+ZG9BKDUpOwokYS0+ZG9BKDcpOwoKdXNsZWVwKDMqVCk7CiRhLT50ZXJtKCk7CiRhLT5qb2luKCk7Cj8+CnZlcnkgdXNlZnVsIGlmIHlvdSBuZWVkIHN5bmNyb25pemF0aW9uIGZyb20gYW4gb3V0c2lkZSBldmVudCAoaWU6IGFzeW5jIHNvY2tldCByZWFkL3dyaXRlIC0geW91ciBydW4oKSB0YWtlcyBjYXJlIG9mIHJlYWRpbmcgd2l0aCB0aW1lb3V0IC8gc2lnbmFsaWcgb25fcGFja2V0IGV2ZW50cywgYnV0IHdyaXRpbmcgbWF5IG9jY3VyIGF0IGFueSB0aW1lIChpZSBhc3luYyBoZWFydGJlZXRpbmcpIGFuZCBmd3JpdGUoJHNvY2spIHdoaWxlIHN0cmVhbV9zZWxlY3QoJHNvY2spIGlzIHdhaXRpbmcgZm9yIHRpbWVvdXQgY2F1c2VzIHNlZ2ZhdWx0cy4uLik=|1|1
